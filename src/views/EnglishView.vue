<template>
  <div class="icqab-page">
    <!-- 頁首橫幅 -->
    <header class="page-header">
      <div class="container">
        <p class="conference-date">November 24-26, 2025 | National Central University, Taoyuan, Taiwan</p>
        <h1>2025 International Forum on Climate Extremes and Societal Resilience: Drought, Heat, and Human Livability in a Warming World</h1>
        <h2> (CESR 2025)</h2>
      </div>
    </header>

    <!-- 主要內容區 -->
    <main class="main-content">
      <div class="container">
        <!-- 手風琴結構 -->
        <div class="accordion">
          <div v-for="(item, index) in sections" :key="index" class="accordion-item">
            <div class="accordion-header" @click="toggleSection(index)">
              <h3>{{ item.title }}</h3>
              <span class="accordion-icon" :class="{ 'is-open': activeIndex === index }"></span>
            </div>
            <div class="accordion-content" :class="{ 'is-open': activeIndex === index }">
              <div class="accordion-content-inner" v-html="item.content"></div>
            </div>
          </div>
        </div>

        <!-- 線性左右佈局區塊 -->
        <div class="info-sections">
          
          <!-- 區塊一：研討會報名 -->
          <section class="info-section">
            <div class="info-text">
              <h4>Registration</h4>
              <a :href="info.registration.url" target="_blank" class="link">{{ info.registration.url }}</a>
            </div>
            <div class="info-media">
              <img :src="getImageUrl(info.registration.qrCode)" alt="Registration QR Code" class="qr-code">
            </div>
          </section>

         

          <!-- 區塊三：地點與主辦資訊 -->
          <section class="info-section">
            <div class="info-media">
              <div class="map-container">
                <iframe :src="info.location.mapUrl" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
              </div>
            </div>
            <div class="info-text host-info">
              <p class="conference-dates">{{ info.host.dates }}</p>
              <p class="conference-venue">{{ info.host.venue }}</p>
              <p class="host-by">Hosted by:</p>
              <ul class="host-list">
                <li v-for="host in info.host.hosts" :key="host">{{ host }}</li>
              </ul>
            </div>
          </section>

        </div>
      </div>
    </main>
  </div>
</template>

<script>
import professorImage from '@/assets/professor.jpg';

export default {
  name: 'ConferenceView',
  data() {
    return {
      activeIndex: 0, 
      // [修改] 將所有 title 和 content 改為英文
      sections: [
        {
          title: 'Introduction',
          content: `<p>Global warming has led to an increase in extreme weather events, with drought being one of the most severe and far-reaching disasters. This conference aims to bring together leading scholars from around the world to explore the complex relationships between drought, climate change, and water sustainability, seeking innovative solutions.</p>`
        },
        {
          title: 'Objectives',
          content: `<ul><li>To promote interdisciplinary academic exchange and cooperation.</li><li>To share the latest technologies in drought monitoring, forecasting, and assessment.</li><li>To discuss the challenges and response strategies for water resource management under climate change.</li><li>To establish a global research network on drought.</li></ul>`
        },
        {
          title: 'Conference Information',
          content: `<p><strong>Date:</strong> April 7-9, 2025</p><p><strong>Venue:</strong> National Central University, Taoyuan, Taiwan</p><p><strong>Organizer:</strong> NCU Center for Taiwan and Global Drought Research (NCU CTGDR)</p>`
        },
        {
          title: 'Keynote Speakers',
          content: `<div class="speakers-grid-in-accordion"><div class="speaker-card-in-accordion"><img src="${professorImage}" alt="Speaker 1"><h4>Dr. Evelyn Reed</h4><p>Drought Monitoring Lab, MIT</p></div><div class="speaker-card-in-accordion"><img src="${professorImage}" alt="Speaker 2"><h4>Prof. Kenji Tanaka</h4><p>Climate Change Institute, University of Tokyo</p></div></div>`
        },
        {
          title: 'Agenda',
          content: `<p>The detailed agenda will be announced in February 2025. Please stay tuned.</p><p><em>Preliminary agenda includes sessions on: Drought Modeling, Climate Impact Assessment, Water Resource Management, and International Collaboration.</em></p>`
        }
      ],
      // [修改] 將 info 物件中的內容改為英文
      info: {
        registration: {
          url: 'https://forms.gle/U2MU6NiGJbaqCfhu6',
          qrCode: 'qr-registration.png'
        },
        poster: {
          steps: [
            { text: 'Submission Deadline: 2025/03/14' },
            { text: 'Notification of Acceptance: 2025/03/24' },
            { text: 'Poster Abstract Format: Please follow the provided template.', url: 'poster-template.pdf' },
            { text: `Submission URL: <a href="https://forms.gle/xPCqDJJxyKqMJPUJA" target="_blank">https://forms.gle/xPCqDJJxyKqMJPUJA</a>` },
          ],
          qrCode: 'qr-poster.png',
        },
        location: {
          mapUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3618.995971485301!2d121.1921356759312!3d24.90022234293043!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x346823c2859c2389%3A0x367f05822365288!2sNational%20Central%20University!5e0!3m2!1sen!2stw!4v1715888888888!5m2!1sen!2stw'
        },
        host: {
          dates: '2025/04/07(MON) ~ 2025/04/09(WED)',
          venue: 'National Central University',
          hosts: [
            'NCU Center for Taiwan and Global Drought Research (NCU CTGDR)'
          ]
        }
      }
    }
  },
  methods: {
    toggleSection(index) {
      if (this.activeIndex === index) {
        this.activeIndex = null;
      } else {
        this.activeIndex = index;
      }
    },
    getImageUrl(imageName) {
      if (!imageName) return '';
      try { return require(`@/assets/${imageName}`); } catch (e) { return ''; }
    },
    getAssetUrl(fileName) {
      if (!fileName) return '#';
      try { return require(`@/assets/${fileName}`); } catch (e) { return '#'; }
    }
  }
}
</script>

<style scoped>
/* CSS 樣式完全維持不變 */
/* --- 背景和頁首橫幅樣式 --- */
.icqab-page { background: #f4f6fc; color: #333; }
.container { max-width: 960px; margin: 0 auto; padding: 0 20px; }
.page-header { padding: 120px 0 60px 0; text-align: center; color: #ffffff; background-image: url('../assets/icqab-bg.jpg'); background-size: cover; background-position: center; position: relative; }
.page-header::before { content: ''; position: absolute; top:0; left:0; width: 100%; height: 100%; background-color: rgba(10, 25, 47, 0.7); }
.page-header .container { position: relative; z-index: 1; }
.conference-date { font-size: 1.2rem; letter-spacing: 1px; margin-bottom: 1rem; }
.page-header h1 { font-size: 2.8rem; font-weight: 700; margin-bottom: 0.5rem; }
.page-header h2 { font-size: 1.8rem; font-weight: 400; color: #ccc; }

/* --- 主要內容區樣式 --- */
.main-content {
  padding: 50px 0 60px 0;
  background: white;
}

/* --- 手風琴樣式 --- */
.accordion { border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
.accordion-item { border-bottom: 1px solid #e0e0e0; }
.accordion-item:last-child { border-bottom: none; }
.accordion-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 25px; cursor: pointer; background-color: #f8f9fa; transition: background-color 0.3s; }
.accordion-header:hover { background-color: #f1f3f5; }
.accordion-header h3 { margin: 0; font-size: 1.5rem; color: #003366; font-weight: 500; }
.accordion-icon { width: 12px; height: 12px; border-right: 3px solid #0056b3; border-bottom: 3px solid #0056b3; transform: rotate(45deg); transition: transform 0.4s ease; }
.accordion-icon.is-open { transform: rotate(-135deg); }
.accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out; }
.accordion-content.is-open { max-height: 1000px; }
.accordion-content-inner { padding: 25px; font-size: 1.1rem; line-height: 1.8; }
:deep(.accordion-content-inner ul) { list-style-type: disc; padding-left: 25px; }
:deep(.accordion-content-inner p) { margin-bottom: 1rem; }
:deep(.accordion-content-inner strong) { color: #212529; }
:deep(.speakers-grid-in-accordion) { display: flex; gap: 30px; text-align: center; }
:deep(.speaker-card-in-accordion img) { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
:deep(.speaker-card-in-accordion h4) { font-size: 1.2rem; margin-bottom: 5px; }

/* --- 線性左右佈局樣式 --- */
.info-sections { margin-top: 50px; }
.info-section { display: flex; align-items: center; gap: 40px; padding: 40px 0; border-bottom: 1px solid #e0e0e0; }
.info-section:last-child { border-bottom: none; }
.info-section:nth-child(even) { flex-direction: row-reverse; }
.info-text, .info-media { flex: 1; min-width: 0; }
.info-text h4 { font-size: 1.8rem; font-weight: 600; color: #000; margin-top: 0; margin-bottom: 20px; }
.info-text h4 .en-text { font-size: 1.2rem; color: #555; margin-left: 10px; }
.info-text .link { font-size: 1.1rem; color: #007bff; word-break: break-all; }
.qr-code { width: 180px; height: 180px; background: white; padding: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: block; margin: 0 auto; }
.poster-steps { padding-left: 0; list-style: none; font-size: 1.1rem; line-height: 2; }
:deep(.poster-steps a) { color: #007bff; }
.map-container { width: 100%; height: 400px; border-radius: 8px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
.host-info { color: #4a4a4a; display: flex; flex-direction: column; justify-content: center; height: 100%; }
.conference-dates { font-size: 2.2rem; font-weight: bold; color: #6a4c93; margin: 0; }
.conference-venue { font-size: 1.8rem; color: #333; font-weight: 500; margin-top: 10px; margin-bottom: 40px; }
.host-by { font-weight: 500; color: #555; margin-bottom: 15px; font-size: 1.1rem; }
.host-list { list-style: none; padding: 0; margin: 0; line-height: 2; font-size: 1.1rem; }
</style>